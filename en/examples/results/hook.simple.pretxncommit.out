<screen><prompt>$</prompt> <userinput>cat check_bug_id</userinput>
#!/bin/sh
# check that a commit comment mentions a numeric bug id
hg log -r $1 --template {desc} | grep -q "\&lt;bug *[0-9]"
<prompt>$</prompt> <userinput>echo 'pretxncommit.bug_id_required = ./check_bug_id $HG_NODE' &gt;&gt; .hg/hgrc</userinput>
<prompt>$</prompt> <userinput>echo a &gt;&gt; a</userinput>
<prompt>$</prompt> <userinput>hg commit -m 'i am not mentioning a bug id'</userinput>
transaction abort!
rollback completed
abort: pretxncommit.bug_id_required hook exited with status 1
<prompt>$</prompt> <userinput>hg commit -m 'i refer you to bug 666'</userinput>
committed 

</screen>
